<!DOCTYPE html>
<html>
<head>
    <title>Interactive Story Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Welcome Screen -->
    <div id="welcome-screen" class="welcome-container">
        <div class="welcome-card">
            <h1>ðŸŽ® Interactive Story Game</h1>
            <p class="welcome-subtitle">Choose your adventure</p>
            
            <div class="player-name-section">
                <input type="text" id="player-name-input" placeholder="Enter your name..." onkeypress="handleNameKeypress(event)">
                <label for="difficulty-select">Difficulty:</label>
                <select id="difficulty-select">
                    <option value="easy">Easy</option>
                    <option value="normal" selected>Normal</option>
                    <option value="hard">Hard</option>
                </select>
            </div>
            
            <div class="mode-buttons">
                <button class="mode-btn story-btn" onclick="startStory()">
                    <div class="btn-icon">ðŸ“–</div>
                    <div class="btn-text">Story Mode</div>
                    <div class="btn-desc">Single player adventure</div>
                </button>
                
                <button class="mode-btn game-btn" onclick="startGame()">
                    <div class="btn-icon">ðŸ‘¥</div>
                    <div class="btn-text">Game Mode</div>
                    <div class="btn-desc">Multiplayer mystery</div>
                </button>
            </div>

            <!-- Story Menu (hidden until Story Mode chosen) -->
            <div id="story-menu" class="story-menu hidden">
                <h3>Story Menu</h3>
                <div class="story-actions">
                    <button onclick="showNewStoryForm()">New Story</button>
                    <button onclick="showContinueStories()">Continue Story</button>
                    <button onclick="manageStories()">Manage Stories/Worlds</button>
                    <button onclick="enterRoomCode()">Enter Room Code</button>
                    <button onclick="backToWelcome()">Back</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Story Screen (single-player immersive) -->
    <div id="story-screen" class="story-screen hidden">
        <div class="story-card">
            <div class="story-header">
                <div class="story-icon">ðŸ“–</div>
                <h2 id="story-title">Your Story</h2>
                <div class="story-actions-inline">
                    <button onclick="saveStory()">Save</button>
                    <button onclick="exportPDF()">Export PDF</button>
                </div>
            </div>
            <div id="narrative-text" class="narrative-panel">The story will appear here...</div>
            <div id="choice-buttons" class="choice-buttons"></div>
            <div class="story-controls">
                <button onclick="endStory()">Exit Story</button>
            </div>
        </div>
    </div>

    <!-- Game Screen (hidden until player joins) -->
    <div id="game-screen" class="container hidden">
        <header>
            <h1>ðŸŽ® Interactive Story Game</h1>
            <div id="status" class="status disconnected">Connecting...</div>
        </header>
        
        <main>
            <div class="left-panel">
                <div id="player-info" class="panel">
                    <h2>Player Info</h2>
                    <p>Name: <strong id="player-name">-</strong></p>
                    <p>Player #: <strong id="player-number">-</strong></p>
                    <p>Room: <strong id="player-room">-</strong></p>
                    <p>Role: <strong id="player-role">-</strong></p>
                </div>
                
                <div id="rooms" class="panel">
                    <h2>Connected Rooms</h2>
                    <div id="room-buttons"></div>
                </div>
            </div>
            
            <div class="center-panel">
                <div id="map" class="panel">
                    <h2>Map</h2>
                    <div id="map-display" class="map"></div>
                </div>
                
                <div id="actions" class="panel">
                    <h2>Actions</h2>
                    <div class="action-buttons">
                        <button onclick="whisper()">Whisper</button>
                        <button onclick="investigate()">Investigate</button>
                        <button onclick="hide()">Hide</button>
                    </div>
                </div>
            </div>
            
            <div class="right-panel">
                <div id="events" class="panel">
                    <h2>Events Log</h2>
                    <div id="events-container" class="events-log"></div>
                </div>
                
                <div id="chat" class="panel">
                    <h2>Chat</h2>
                    <div id="chat-messages" class="chat-messages"></div>
                    <input type="text" id="chat-input" placeholder="Send message..." onkeypress="handleChatKeypress(event)">
                    <button onclick="sendChat()">Send</button>
                </div>
            </div>
        </main>
        
        <footer>
            <p>Connected Players: <strong id="player-count">0</strong></p>
        </footer>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
